<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>地理定位</title>
    <script type="text/javascript" src="http://api.map.baidu.com/api?v=2.0&ak=bqHWbmgjAXI7THmM4aG0mwmBXS9SX2c9">
    </script>
    <style media="screen">
      body, html,#allmap {
        width: 100%;
        height: 100%;
        overflow: hidden;
        margin:0;
        font-family:"微软雅黑";
      }
    </style>

  </head>
  <body>
    <button id='btn'> 点击获得地图</button>
    <div id="allmap"></div>

    <script type="text/javascript">
      if (navigator.geolocation){
        console.log(true);
      } else {
        console.log(false);
      }

      var btn = document.getElementById("btn");
      btn.onclick = function(e){
        navigator.geolocation.getCurrentPosition(sucess, error);
      };

      function sucess(pos){
        console.log("经度", pos.coords.longitude);
        console.log("纬度", pos.coords.latitude);
        console.log("海拔高度", pos.coords.altitude);
        console.log("精确度", pos.coords.accuracy);

        // 百度地图API功能
        var map = new BMap.Map("allmap");    // 创建Map实例
        map.centerAndZoom(new BMap.Point(116.23, 39.54), 11);  // 初始化地图,设置中心点坐标和地图级别

        map.addControl(new BMap.MapTypeControl());
      	map.setCurrentCity("北京");
        map.enableScrollWheelZoom(true);
      }


        function error(err){
        console.log("定位失败", err.message);
      }

    </script>

  </body>
</html>
